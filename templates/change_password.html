{% extends 'dummy.html' %}



{% block title %}

{% endblock %}

{% block body_block %}
<style>
    body
    {
        background-image: url("https://wallpapercave.com/wp/wp5243013.jpg");
        background-size: cover;
        background-repeat: no-repeat;
    }
    .container {
        width: 600px;
        margin: 0 auto;
        padding: 20px;
        color: white;
        font-weight: bold;
        margin-top: 100px;
        border: 1px solid #ccc;
        border-radius: 5px;
        display: none; /* Initially hide the change password form */
      }
      .container h2 {
        text-align: center;
      }
      .container input[type="password"] {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        box-sizing: border-box;
        border-radius: 4px;
      }
      .container input[type="submit"] {
        width: 50%;
        background-color: #4CAF50;
        color: white;
        padding: 14px 20px;
        margin: 8px 0;
        border: none;
        margin-left: 120px;
        border-radius: 4px;
        cursor: pointer;
      }
      h2
      {
        font-weight: bold;
        color: rgb(18, 0, 135);
      }
      .container input[type="text"] {
        width: 100%;
        padding: 12px 20px;
        margin: 8px 0;
        display: inline-block;
        border: 1px solid #ccc;
        box-sizing: border-box;
        border-radius: 4px;
      }
  </style>
  <script>
    function toggleForm() {
      var form = document.getElementById("changePasswordForm");
      form.style.display = form.style.display === "none" ? "block" : "none";
    }
  </script>

  
  <button onclick="toggleForm()" class="btn btn-info">Change Password</button>
  <div class="container" id="changePasswordForm">
    <h2 style="color: rgb(135, 0, 137);">Change Password Form</h2>
    <form method="POST">
      {% csrf_token %}
      <label for="username">Username:</label>
      <br>
      <input type="text" id="username" name="username" placeholder="Enter your current password">
<br>
<br>
      <label for="newPassword">Password:</label>
      <input type="password" id="newPassword" name="newPassword" placeholder="Enter your new password">
      <input type="submit" value="Change Password">
    </form>
  </div>
</form>
</form>

{% endblock %}

<!--@login_required: This is a decorator commonly used in web frameworks to enforce authentication before accessing a particular view. It ensures that only authenticated users can access the change_password view. If a user is not logged in, they will be redirected to the login page.

def change_password(request): This defines the view function named change_password that handles the password change functionality.

if request.method == 'POST':: This condition checks if the HTTP method used in the request is a POST method. In most cases, this indicates that the user has submitted a form to change their password.

pw = request.POST['pw']: This line retrieves the new password entered by the user from the POST data. It assumes that the form input field for the password has a name attribute of "pw".

username = request.session.get('username'): This retrieves the username of the currently logged-in user from the session object. It assumes that the username was stored in the session previously.

UO = User.objects.get(username=username): This line retrieves the user object from the database using the retrieved username. It assumes that you have a User model defined in your application.

UO.set_password(pw): This sets the user's password to the new password provided by the user using the set_password() method provided by Django's User model. This method automatically hashes the password for security.

UO.save(): This saves the updated user object to the database.

return HttpResponse('Password is changed successfully'): This line returns an HTTP response with the message indicating that the password has been changed successfully.

The final return render(request, 'change_password.html') is executed if the HTTP method is not POST (e.g., a GET request). It renders the 'change_password.html' template, which is typically a form where the user can enter their new password.

Overall, this code snippet handles the password change functionality for authenticated users. It retrieves the new password from the form, updates the user's password in the database, and provides a response to indicate the success of the password change.-->